{% extends "stormtrooper/base.html" %}
{% load humanize el_pagination_tags %}
{% load addcss %}

{% block content %}
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-1 is-offset-1 has-text-right">
        <small>&nbsp;</small>
        <h1 class="title">
          <a href="{{ question.task.get_absolute_url }}" class="button is-dark is-outlined"><i class="fa fa-arrow-left"></i></a>
        </h1>
      </div>
      <div class="column is-8">
        <small>{{ question.task.created_on }}</small>
        <h1 class="title">{{ question.task.title }}
          {% if question.task.is_closed %}
            <span class="tag is-danger">CLOSED</span>
          {% elif question.task.is_active %}
            <span class="tag is-success">ACTIVE</span>
          {% endif %}</h1>
        <div class="box">
        {{ question.task.description|linebreaks|safe }}
        </div>
        <div class="box">
            <table class="table is-striped">
                <thead>
                    <tr>
                        <th> Desciption </th>
                        <th> Value </th>
                    </tr>
                </thead>
                <tbody>
                    {% for k,v in question.question.items %}
                    <tr>
                        <td>{{ k }}</td>
                        <td>{{ v }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="box">
            {% if form.answer.errors %}
            {% for error in form.answer.errors %}
            <div class="notification is-danger">
                <button class="delete"></button>
                {{ error|escape }}
            </div>
            {% endfor %}
            {% endif %}
            {% if form.answer_choice.errors %}
            {% for error in form.answer_choice.errors %}
            <div class="notification is-danger">
                <button class="delete"></button>
                {{ error|escape }}
            </div>
            {% endfor %}
            {% endif %}
            <form action="{{ question.get_absolute_url }}" method="post">
                {% csrf_token %}
                {% if question.task.is_multiple_choice %}
                <p class="control">
                    {% for choice in form.answer_choice %}
                    <label class="radio">
                       {{ choice }}
                    </label>
                    {% endfor %}
                </p>
                {% else %}
                <label class="label">
                    {{ form.answer.label_tag }}
                </label>
                <p class="control">
                    {{ form.answer | addcss:"textarea" }}
                </p>
                {% endif %}
                <p class="control">
                    <button class="button is-primary">Submit</button>
                </p>
            </form>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
