{% extends "stormtrooper/base.html" %}
{% load el_pagination_tags %}

{% block content %}
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <h1 class="title">Open Tasks</h1>
        <hr />
        {% if task_list %}
        <div class="box">
          <table class="table is-striped">
            <thead>
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>No of questions</th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {% paginate task_list %}
              {% for task in task_list %}
              <tr>
                <td>{{ task.id }}</td>
                <td><a href="{{ task.get_absolute_url }}" title="{{ task.title }}">{{ task.title }}</a></td>
                <td>{{ task.no_of_questions }}</td>
                <td>{% if task.is_closed %}<span class="tag is-small is-danger">CLOSED</span>{% endif %}</td>
                <td>
                  <a href="{{ task.get_absolute_url }}" class="button is-info" title="Details"><i class="fa fa-ellipsis-h"></i></a>
                  <a href="{% url 'task-play' task.id %}" class="button is-success" title="Start"><i class="fa fa-play-circle"></i></a>
                  {% if task.has_exports %}
                  <a href="{% url 'export-list' task.id %}" class="button is-danger" title="past exports"><i class="fa fa-cloud-download"></i></a>
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          {% show_pages %}
        </div>
        {% else %}
          <div class="notification is-warning">
            <span class="icon"><i class="fa fa-exclamation-circle"></i></span> Sorry trooper, no open tasks
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>
{% endblock %}
